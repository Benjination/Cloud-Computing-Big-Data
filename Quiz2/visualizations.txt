EARTHQUAKE DATA VISUALIZATION RECOMMENDATIONS
==============================================
D3.js Visualization Suggestions for Each Query Type

Last Updated: November 9, 2025
Purpose: Guide for implementing interactive D3.js visualizations for earthquake data queries


1. MAGNITUDE > X (e.g., Magnitude > 5.0)
   Query: searchMagnitudeGreater()
   -------------------------------
   PRIMARY VISUALIZATION: Histogram/Bar Chart
   - X-axis: Magnitude bins (5.0-5.5, 5.5-6.0, 6.0-6.5, etc.)
   - Y-axis: Count of earthquakes
   - Color coding: Gradient from yellow (lower) to red (higher magnitudes)
   - Interactive tooltips: Show exact count and magnitude range on hover
   
   SECONDARY VISUALIZATION: Timeline
   - X-axis: Date/time
   - Y-axis: Magnitude
   - Points: Individual earthquakes as circles (size = magnitude)
   - Enables pattern recognition over time
   
   WHY: Users want to see the distribution of earthquake magnitudes and 
        identify if certain magnitude ranges are more common.


2. MAGNITUDE RANGE (e.g., 4.0 - 4.9)
   Query: searchMagnitudeRange()
   -------------------------------
   PRIMARY VISUALIZATION: Stacked Bar Chart
   - X-axis: 0.1 magnitude increments (4.0, 4.1, 4.2, ... 4.9)
   - Y-axis: Count
   - Stacked by: Region or depth category
   - Interactive: Click bar to filter/drill down
   
   SECONDARY VISUALIZATION: Box Plot
   - Shows median, quartiles, and outliers for the range
   - Useful for statistical analysis
   
   WHY: Provides granular view of specific magnitude ranges and helps 
        identify patterns within narrow earthquake intensity bands.


3. LOCATION PROXIMITY SEARCH (Near Lat/Lng within Radius)
   Query: searchNearLocation()
   -------------------------------
   PRIMARY VISUALIZATION: Interactive Map (D3.js GeoJSON)
   - Base map: World/region map
   - Center point: Search location (marked with star/pin)
   - Radius circle: Visual boundary of search area
   - Earthquake points: Circles sized by magnitude, colored by depth
   - Zoom/pan: Allow exploration of nearby areas
   
   SECONDARY VISUALIZATION: Radial Distance Chart
   - Polar coordinates showing earthquakes by distance from center
   - Angle: Direction (N, S, E, W)
   - Radius: Distance from search point
   - Size/color: Magnitude
   
   WHY: Geographic context is crucial for location-based searches.
        Users need to see spatial relationships and clustering.


4. TIME PATTERNS ANALYSIS (Day vs Night)
   Query: analyzeTimePatterns()
   -------------------------------
   PRIMARY VISUALIZATION: Circular/Radial Clock Chart
   - 24-hour clock layout
   - Segments: Each hour of day
   - Arc height/thickness: Number of earthquakes in that hour
   - Day/night shading: Background shading for visual reference
   - Color coding: Blue (night) vs Yellow (day)
   
   SECONDARY VISUALIZATION: Dual Bar Chart
   - Side-by-side bars comparing day vs night totals
   - Grouped by magnitude categories
   
   WHY: Temporal patterns are best shown with circular time representations.
        Helps identify if earthquakes follow diurnal patterns.


5. WEEKEND vs WEEKDAY PATTERNS
   Query: analyzeWeekendPatterns()
   -------------------------------
   PRIMARY VISUALIZATION: Calendar Heatmap
   - Layout: 7 columns (days of week) Ã— 52 rows (weeks of year)
   - Color intensity: Number of earthquakes per day
   - Highlights: Weekends in different background color
   
   SECONDARY VISUALIZATION: Grouped Bar Chart
   - X-axis: Days of week (Mon, Tue, Wed, Thu, Fri, Sat, Sun)
   - Y-axis: Average earthquake count
   - Grouped by: Magnitude ranges
   - Weekend bars highlighted with different color
   
   WHY: Weekly patterns are intuitive when shown in week-day format.
        Heatmap reveals long-term trends and anomalies.


6. EARLY MORNING ANALYSIS (12am - 6am)
   Query: analyzeEarlyMorning()
   -------------------------------
   PRIMARY VISUALIZATION: Area Chart
   - X-axis: Hours (0, 1, 2, 3, 4, 5, 6)
   - Y-axis: Number of earthquakes
   - Filled area under curve
   - Moon phase icons on background
   - Gradient fill: Dark blue to light blue (night to dawn)
   
   SECONDARY VISUALIZATION: Stacked Line Chart
   - Multiple lines for different magnitude ranges
   - Shows how different intensity earthquakes vary by hour
   
   WHY: Area chart emphasizes the continuity of early morning hours.
        Natural metaphor with color gradient matching real-world time.


7. GEOGRAPHIC CLUSTERING
   Query: findClusters()
   -------------------------------
   PRIMARY VISUALIZATION: Cluster Bubble Map
   - Base: World map or region map
   - Bubbles: Clustered earthquake groups
   - Bubble size: Number of earthquakes in cluster
   - Bubble color: Average magnitude of cluster
   - Bubble position: Centroid of cluster
   - Interactive: Click to expand and show individual earthquakes
   
   SECONDARY VISUALIZATION: Dendrogram (Hierarchical Clustering)
   - Tree structure showing how earthquakes group together
   - Branch length: Distance between clusters
   - Leaf nodes: Individual earthquakes
   - Color: Magnitude or region
   
   WHY: Clustering analysis requires spatial visualization to be meaningful.
        Bubbles immediately show hotspots and patterns.


8. PERFORMANCE ANALYTICS
   Query: viewPerformanceStats()
   -------------------------------
   PRIMARY VISUALIZATION: Multi-line Time Series
   - X-axis: Time
   - Y-axis: Query execution time (ms)
   - Multiple lines: Different query types
   - Reference line: Average performance target
   - Interactive legend: Toggle query types on/off
   
   SECONDARY VISUALIZATION: Performance Dashboard
   - Gauge charts: Current performance metrics
   - Sparklines: Recent performance trends
   - Bar comparison: Average time by query type
   
   WHY: Performance monitoring requires trend analysis over time.
        Multiple metrics need side-by-side comparison.


9. EXPORT VISUALIZATIONS
   Query: exportPerformanceData() or general data export
   -------------------------------
   VISUALIZATION: Summary Dashboard
   - Grid layout with small multiples
   - Top section: Key statistics (total earthquakes, avg magnitude, etc.)
   - Middle section: Mini versions of main visualizations
   - Bottom section: Date range and filter summary
   - Download button: Export as SVG or PNG
   
   WHY: Before exporting, users benefit from seeing a summary of what
        they're downloading. Helps verify correct data selection.


GENERAL D3.js IMPLEMENTATION TIPS
===================================

COLOR SCHEMES:
**PROFESSIONAL DARK THEME - Slate Gray, Black, Dark Blue**

Base Palette:
- Background: #0f172a (slate-900, deep navy-black)
- Secondary Background: #1e293b (slate-800, lighter slate)
- Tertiary Background: #334155 (slate-700, medium slate)
- Text Primary: #f1f5f9 (slate-100, crisp white-gray)
- Text Secondary: #cbd5e1 (slate-300, muted gray)
- Grid Lines: #475569 (slate-600, subtle grid)
- Borders/Dividers: #64748b (slate-500, visible but subtle)

Data Visualization Colors (High Contrast):
- Magnitude Scale (Sequential):
  Low:    #3b82f6 (blue-500, cool blue)
  Medium: #8b5cf6 (violet-500, purple accent)
  High:   #ec4899 (pink-500, hot pink/magenta)
  
- Depth Scale (Sequential):
  Shallow: #06b6d4 (cyan-500, bright cyan)
  Mid:     #0891b2 (cyan-600, deep cyan)
  Deep:    #0e7490 (cyan-700, dark cyan)

- Time of Day:
  Night:   #1e40af (blue-800, deep blue)
  Dawn:    #3730a3 (indigo-800, indigo)
  Day:     #6366f1 (indigo-500, bright indigo)
  Dusk:    #7c3aed (violet-600, rich violet)

- Clusters/Categories (Distinct, High Contrast):
  1. #06b6d4 (cyan-500)
  2. #8b5cf6 (violet-500)
  3. #ec4899 (pink-500)
  4. #14b8a6 (teal-500)
  5. #f59e0b (amber-500)
  6. #3b82f6 (blue-500)
  7. #a855f7 (purple-500)
  8. #10b981 (emerald-500)

Accent Colors:
- Success/Positive: #10b981 (emerald-500, green)
- Warning: #f59e0b (amber-500, gold)
- Error/Alert: #ef4444 (red-500, vibrant red)
- Info: #3b82f6 (blue-500, bright blue)
- Highlight: #8b5cf6 (violet-500, purple glow)

Contrast Guidelines:
- All text on dark backgrounds uses slate-100 (#f1f5f9) minimum
- Data elements use colors with 7:1 contrast ratio against backgrounds
- Hover states: Add 20% brightness or apply #ffffff10 overlay
- Selected states: Add 2px border in #8b5cf6 (violet-500)
- Disabled states: Reduce opacity to 40%

Gradient Examples:
- Dark Backdrop: linear-gradient(135deg, #0f172a 0%, #1e293b 100%)
- Data Highlight: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%)
- Heat Map: linear-gradient(0deg, #0891b2 0%, #8b5cf6 50%, #ec4899 100%)

INTERACTIVITY:
- Tooltips: Show detailed info on hover (magnitude, location, time, depth)
- Zoom/Pan: Enable for maps and detailed charts
- Brushing: Allow selection of date ranges on timelines
- Filtering: Click legend items to show/hide data series
- Transitions: Smooth animations when data updates (duration: 750ms)

RESPONSIVENESS:
- Use viewBox for SVG scaling
- Implement resize listeners
- Adjust detail level based on screen size
- Mobile: Simplify interactions (tap instead of hover)

PERFORMANCE:
- Use canvas for >1000 data points
- Implement data aggregation for large datasets
- Lazy loading: Only render visible elements
- Debounce resize/scroll events

ACCESSIBILITY:
- Add ARIA labels to charts
- Provide text alternatives
- Ensure sufficient color contrast
- Support keyboard navigation


RECOMMENDED D3.js LIBRARIES & PLUGINS
======================================
- d3-geo: Map projections and geographic data
- d3-hexbin: Hexagonal binning for dense point data
- d3-contour: Density contours for clustering
- d3-legend: Automatic legend generation
- d3-annotation: Add annotations and callouts
- d3-zoom: Advanced zoom behaviors
- d3-brush: Range selection


IMPLEMENTATION PRIORITY
========================
1. Start with: Magnitude histogram (most common query)
2. Then add: Interactive map for location searches
3. Next: Time pattern circular chart (visually impressive)
4. Finally: Advanced analytics (clustering, performance)


RESPONSIVE BREAKPOINTS
=======================
Desktop (>1200px):  Full interactive features, detailed tooltips
Tablet (768-1200px): Simplified interactions, medium detail
Mobile (<768px):    Essential features only, large touch targets


SAMPLE CODE STRUCTURE
======================
function createMagnitudeHistogram(data, containerId) {
    // 1. Set dimensions and margins
    // 2. Create scales (x: magnitude, y: count)
    // 3. Generate histogram bins
    // 4. Create SVG container
    // 5. Add axes
    // 6. Draw bars with transitions
    // 7. Add tooltips
    // 8. Add interactivity (hover, click)
}


NEXT STEPS
==========
1. Create dedicated visualization.js file
2. Implement each visualization as a reusable function
3. Add configuration options (colors, sizes, transitions)
4. Test with actual earthquake data
5. Optimize performance for large datasets
6. Add unit tests for data processing
7. Document API for each visualization function
